(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{67:function(){},2061:function(){},8588:function(e,a,t){Promise.resolve().then(t.bind(t,6836))},6836:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return _}});var r=t(7437),s=t(2265),n=t(6463),l=t(8370),o=t(3537),i=t.n(o),d=t(9842),c=t(5344);function u(){let[e,a]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{let e=(0,d.IO)((0,d.hJ)(c.Z,"geofence"));a((await (0,d.PL)(e)).docs.map(e=>({id:e.id,...e.data()})))})()},[]);let[t,n]=(0,s.useState)({id:"",password:"",name:"",class:"employee",title:"Administrative Officer",gender:"male",email:"",cell:"",address:"",workHours:{Monday:{start:"",end:""},Tuesday:{start:"",end:""},Wednesday:{start:"",end:""},Thursday:{start:"",end:""},Friday:{start:"",end:""},Saturday:{start:"",end:""},Sunday:{start:"",end:""}},workPeriod:[],geofence:null}),l=e=>{let{name:a,value:r}=e.target;if(a.includes(".start")||a.includes(".end")){let[e,t]=a.split(".");n(a=>({...a,workHours:{...a.workHours,[e]:{...a.workHours[e],[t]:r}}}))}else n(e=>({...e,[a]:r})),console.log(t)},o=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase()),u=()=>{for(let e in t.workHours){let a=t.workHours[e].start,r=t.workHours[e].end;if(a&&r&&new Date("1970-01-01T".concat(r))<new Date("1970-01-01T".concat(a)))return alert("".concat(e,": End time cannot be earlier than start time.")),!1}return!0},p=async()=>{let e=(0,d.IO)((0,d.hJ)(c.Z,"employee"),(0,d.ar)("id","==",t.id)),a=(0,d.IO)((0,d.hJ)(c.Z,"employee"),(0,d.ar)("email","==",t.email)),r=await (0,d.PL)(e),s=await (0,d.PL)(a);return r.empty?!!s.empty||(alert("Email already exists"),!1):(alert("Employee ID already exists"),!1)},h=async e=>{if(e.preventDefault(),u()){if(!o(t.email)){alert("Invalid email format");return}if(await p())try{let e=Object.keys(t.workHours).reduce((e,a)=>(e[a]="".concat(t.workHours[a].start," - ").concat(t.workHours[a].end),e),{});await (0,d.ET)((0,d.hJ)(c.Z,"employee"),{...t,workHours:e}),alert("Employee added successfully!"),n({id:"",password:"",name:"",class:"employee",title:"Administrative Officer",gender:"male",email:"",cell:"",address:"",workHours:{Monday:{start:"",end:""},Tuesday:{start:"",end:""},Wednesday:{start:"",end:""},Thursday:{start:"",end:""},Friday:{start:"",end:""},Saturday:{start:"",end:""},Sunday:{start:"",end:""}},workPeriod:[],geofence:""})}catch(e){console.error("Error adding document: ",e),alert("Error adding employee."+e)}}};return(0,r.jsxs)("div",{className:i().register,children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Register Employee"}),(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",id:"id",name:"id",placeholder:"ID",value:t.id,onChange:l,required:!0,className:"peer p-4 block w-full bg-gray-100 border-transparent rounded-lg text-sm placeholder:text-transparent focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600 focus:pt-6 focus:pb-2 [&:not(:placeholder-shown)]:pt-6 [&:not(:placeholder-shown)]:pb-2 autofill:pt-6 autofill:pb-2"}),(0,r.jsx)("label",{htmlFor:"id",className:"absolute top-0 start-0 p-4 h-full text-sm truncate pointer-events-none transition ease-in-out duration-100 border border-transparent origin-[0_0] dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none peer-focus:scale-90 peer-focus:translate-x-0.5 peer-focus:-translate-y-1.5 peer-focus:text-gray-500 dark:peer-focus:text-neutral-500 peer-[:not(:placeholder-shown)]:scale-90 peer-[:not(:placeholder-shown)]:translate-x-0.5 peer-[:not(:placeholder-shown)]:-translate-y-1.5 peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"ID"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"password",id:"password",name:"password",placeholder:"Password",value:t.password,onChange:l,required:!0,className:"peer p-4 block w-full bg-gray-100 border-transparent rounded-lg text-sm placeholder:text-transparent focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600 focus:pt-6 focus:pb-2 [&:not(:placeholder-shown)]:pt-6 [&:not(:placeholder-shown)]:pb-2 autofill:pt-6 autofill:pb-2"}),(0,r.jsx)("label",{htmlFor:"password",className:"absolute top-0 start-0 p-4 h-full text-sm truncate pointer-events-none transition ease-in-out duration-100 border border-transparent origin-[0_0] dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none peer-focus:scale-90 peer-focus:translate-x-0.5 peer-focus:-translate-y-1.5 peer-focus:text-gray-500 dark:peer-focus:text-neutral-500 peer-[:not(:placeholder-shown)]:scale-90 peer-[:not(:placeholder-shown)]:translate-x-0.5 peer-[:not(:placeholder-shown)]:-translate-y-1.5 peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Password"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"Name",value:t.name,onChange:l,required:!0,className:"peer p-4 block w-full bg-gray-100 border-transparent rounded-lg text-sm placeholder:text-transparent focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600 focus:pt-6 focus:pb-2 [&:not(:placeholder-shown)]:pt-6 [&:not(:placeholder-shown)]:pb-2 autofill:pt-6 autofill:pb-2"}),(0,r.jsx)("label",{htmlFor:"name",className:"absolute top-0 start-0 p-4 h-full text-sm truncate pointer-events-none transition ease-in-out duration-100 border border-transparent origin-[0_0] dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none peer-focus:scale-90 peer-focus:translate-x-0.5 peer-focus:-translate-y-1.5 peer-focus:text-gray-500 dark:peer-focus:text-neutral-500 peer-[:not(:placeholder-shown)]:scale-90 peer-[:not(:placeholder-shown)]:translate-x-0.5 peer-[:not(:placeholder-shown)]:-translate-y-1.5 peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Name"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{id:"class",name:"class",value:t.class,onChange:l,required:!0,className:"peer p-4 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-900 dark:border-neutral-700 dark:text-neutral-400 dark:focus:ring-neutral-600   focus:pt-6   focus:pb-2   [&:not(:placeholder-shown)]:pt-6   [&:not(:placeholder-shown)]:pb-2   autofill:pt-6   autofill:pb-2",children:[(0,r.jsx)("option",{value:"employee",children:"Employee"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]}),(0,r.jsx)("label",{className:"absolute top-0 start-0 p-4 h-full truncate pointer-events-none transition ease-in-out duration-100 border border-transparent dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none   peer-focus:text-xs   peer-focus:-translate-y-1.5   peer-focus:text-gray-500 dark:peer-focus:text-neutral-500   peer-[:not(:placeholder-shown)]:text-xs   peer-[:not(:placeholder-shown)]:-translate-y-1.5   peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Employee Type"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{id:"title",name:"title",value:t.title,onChange:l,required:!0,className:"peer p-4 pe-9 block w-full bg-gray-100 border-transparent rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600   focus:pt-6   focus:pb-2   [&:not(:placeholder-shown)]:pt-6   [&:not(:placeholder-shown)]:pb-2   autofill:pt-6   autofill:pb-2",children:[(0,r.jsx)("option",{value:"Administrative Officer",children:"Administrative Officer"}),(0,r.jsx)("option",{value:"Program Coordinator",children:"Program Coordinator"}),(0,r.jsx)("option",{value:"Instructor",children:"Instructor"}),(0,r.jsx)("option",{value:"Receptionist",children:"Receptionist"})]}),(0,r.jsx)("label",{htmlFor:"title",className:"absolute top-0 start-0 p-4 h-full truncate pointer-events-none transition ease-in-out duration-100 border border-transparent dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none   peer-focus:text-xs   peer-focus:-translate-y-1.5   peer-focus:text-gray-500 dark:peer-focus:text-neutral-500   peer-[:not(:placeholder-shown)]:text-xs   peer-[:not(:placeholder-shown)]:-translate-y-1.5   peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Job Title"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("select",{id:"gender",name:"gender",value:t.gender,onChange:l,required:!0,className:"peer p-4 pe-9 block w-full bg-gray-100 border-transparent rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600   focus:pt-6   focus:pb-2   [&:not(:placeholder-shown)]:pt-6   [&:not(:placeholder-shown)]:pb-2   autofill:pt-6   autofill:pb-2",children:[(0,r.jsx)("option",{value:"male",children:"Male"}),(0,r.jsx)("option",{value:"female",children:"Female"})]}),(0,r.jsx)("label",{className:"absolute top-0 start-0 p-4 h-full truncate pointer-events-none transition ease-in-out duration-100 border border-transparent dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none   peer-focus:text-xs   peer-focus:-translate-y-1.5   peer-focus:text-gray-500 dark:peer-focus:text-neutral-500   peer-[:not(:placeholder-shown)]:text-xs   peer-[:not(:placeholder-shown)]:-translate-y-1.5   peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Gender"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"Email",value:t.email,onChange:l,required:!0,className:"peer p-4 block w-full bg-gray-100 border-transparent rounded-lg text-sm placeholder:text-transparent focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600 focus:pt-6 focus:pb-2 [&:not(:placeholder-shown)]:pt-6 [&:not(:placeholder-shown)]:pb-2 autofill:pt-6 autofill:pb-2"}),(0,r.jsx)("label",{htmlFor:"email",className:"absolute top-0 start-0 p-4 h-full text-sm truncate pointer-events-none transition ease-in-out duration-100 border border-transparent origin-[0_0] dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none peer-focus:scale-90 peer-focus:translate-x-0.5 peer-focus:-translate-y-1.5 peer-focus:text-gray-500 dark:peer-focus:text-neutral-500 peer-[:not(:placeholder-shown)]:scale-90 peer-[:not(:placeholder-shown)]:translate-x-0.5 peer-[:not(:placeholder-shown)]:-translate-y-1.5 peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Email"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",id:"cell",name:"cell",placeholder:"Cell",value:t.cell,onChange:l,required:!0,className:"peer p-4 block w-full bg-gray-100 border-transparent rounded-lg text-sm placeholder:text-transparent focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600 focus:pt-6 focus:pb-2 [&:not(:placeholder-shown)]:pt-6 [&:not(:placeholder-shown)]:pb-2 autofill:pt-6 autofill:pb-2"}),(0,r.jsx)("label",{htmlFor:"cell",className:"absolute top-0 start-0 p-4 h-full text-sm truncate pointer-events-none transition ease-in-out duration-100 border border-transparent origin-[0_0] dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none peer-focus:scale-90 peer-focus:translate-x-0.5 peer-focus:-translate-y-1.5 peer-focus:text-gray-500 dark:peer-focus:text-neutral-500 peer-[:not(:placeholder-shown)]:scale-90 peer-[:not(:placeholder-shown)]:translate-x-0.5 peer-[:not(:placeholder-shown)]:-translate-y-1.5 peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Cell"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:"text",id:"address",name:"address",placeholder:"Address",value:t.address,onChange:l,required:!0,className:"peer p-4 block w-full bg-gray-100 border-transparent rounded-lg text-sm placeholder:text-transparent focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none dark:bg-neutral-700 dark:border-transparent dark:text-neutral-400 dark:focus:ring-neutral-600 focus:pt-6 focus:pb-2 [&:not(:placeholder-shown)]:pt-6 [&:not(:placeholder-shown)]:pb-2 autofill:pt-6 autofill:pb-2"}),(0,r.jsx)("label",{htmlFor:"address",className:"absolute top-0 start-0 p-4 h-full text-sm truncate pointer-events-none transition ease-in-out duration-100 border border-transparent origin-[0_0] dark:text-white peer-disabled:opacity-50 peer-disabled:pointer-events-none peer-focus:scale-90 peer-focus:translate-x-0.5 peer-focus:-translate-y-1.5 peer-focus:text-gray-500 dark:peer-focus:text-neutral-500 peer-[:not(:placeholder-shown)]:scale-90 peer-[:not(:placeholder-shown)]:translate-x-0.5 peer-[:not(:placeholder-shown)]:-translate-y-1.5 peer-[:not(:placeholder-shown)]:text-gray-500 dark:peer-[:not(:placeholder-shown)]:text-neutral-500 dark:text-neutral-500",children:"Address"})]}),(0,r.jsxs)("div",{className:i().workHours,children:[(0,r.jsx)("h3",{children:"Work Hours"}),Object.keys(t.workHours).map(e=>(0,r.jsxs)("div",{className:i().workHoursRow,children:[(0,r.jsx)("label",{children:e}),(0,r.jsx)("input",{type:"time",name:"".concat(e,".start"),value:t.workHours[e].start,onChange:l,className:i().inputWorkHours}),(0,r.jsx)("span",{children:"to"}),(0,r.jsx)("input",{type:"time",name:"".concat(e,".end"),value:t.workHours[e].end,onChange:l,className:i().inputWorkHours})]},e)),"Employees will not be able to clock in unless they are within 1km of the selected geofence location.",(0,r.jsxs)("select",{name:"geofence",id:"geofence-select",value:t.geofence,onChange:l,required:!0,children:[(0,r.jsx)("option",{value:"",selected:!0,disabled:!0,children:"Select a geofence location"}),(0,r.jsx)("option",{value:null,children:"None"}),e.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsx)("button",{type:"submit",className:i().button,children:"Register"})]})]})}var p=t(7170),h=t(7800),m=t(9450),x=function(e){let{onEdit:a}=e,[t,n]=(0,s.useState)([]),[l,o]=(0,s.useState)(""),[u,x]=(0,s.useState)("all"),[b,y]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),j=(0,s.useCallback)(async()=>{n((await (0,d.PL)((0,d.hJ)(c.Z,"employee"))).docs.map(e=>({id:e.id,...e.data()})))},[]);(0,s.useEffect)(()=>{j()},[j]);let k=e=>{let a=(e/60).toFixed(1);return"".concat(a,"h")},w=m.ou.now().setZone("America/Edmonton").toFormat("cccc"),v=t.filter(e=>{let a=""===l||Object.values(e).some(e=>e.toString().toLowerCase().includes(l)),t="online"===e.status;e.workDurationToday;let r=e.workHours&&" - "!==e.workHours[w],s="all"===u||"online"===u&&t||"workingToday"===u&&r||"offToday"===u&&!r;return a&&s}),N=(()=>{let e=[];for(let a=6;a>=0;a--)e.push(m.ou.now().minus({days:a}).toISODate());return e})();return(0,r.jsxs)("div",{className:i().content,children:[(0,r.jsxs)("div",{className:i().searchBar,children:[(0,r.jsx)("input",{type:"text",placeholder:"Search employees...",value:l,onChange:e=>{o(e.target.value.toLowerCase())},className:i().input}),(0,r.jsxs)("select",{value:u,onChange:e=>{x(e.target.value)},className:i().input,children:[(0,r.jsx)("option",{value:"all",children:"Show All"}),(0,r.jsx)("option",{value:"online",children:"Online Only"}),(0,r.jsx)("option",{value:"workingToday",children:"Working Today"}),(0,r.jsx)("option",{value:"offToday",children:"Off Today"})]}),(0,r.jsx)("input",{type:"date",value:b,onChange:e=>{y(e.target.value)},className:i().input}),(0,r.jsx)("input",{type:"date",value:f,onChange:e=>{g(e.target.value)},className:i().input}),(0,r.jsx)("button",{onClick:()=>{if(!b||!f||m.ou.fromISO(b)>m.ou.fromISO(f)){alert("Please select a valid start and end date.");return}let e=m.ou.fromISO(b).startOf("day"),a=m.ou.fromISO(f).endOf("day"),r=[];for(let t=e;t<=a;t=t.plus({days:1}))r.push(t.toISODate());let s=t.map(e=>{let a=e.workPeriod||{},t=e.workTime||{},s=r.map(e=>{let r=t[e]?t[e]:"N/A",s=a[e]?a[e]:0;return{date:e,workEntry:r,duration:s}}),n=k(s.reduce((e,a)=>{let{duration:t}=a;return e+t},0));return{ID:e.id,Name:e.name,dailyDurations:s,Total:n}}),n=[["ID","Name",...r,"Total"]];s.forEach(e=>{let a=[e.ID,e.Name],t=["",""],r=["",""];e.dailyDurations.forEach(e=>{let{date:s,workEntry:n,duration:l}=e;a.push(s),t.push(n),r.push(k(l))}),a.push(""),t.push(""),r.push(e.Total),n.push(a),n.push(t),n.push(r),n.push([])});let l=h.P6.aoa_to_sheet(n),o=[{wpx:50},{wpx:110},...r.map(()=>({wpx:150})),{wpx:100}];l["!cols"]=o;let i=h.P6.book_new();h.P6.book_append_sheet(i,l,"Employees");let d=new Blob([h.cW(i,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"});(0,p.saveAs)(d,"employees.xlsx")},className:i().exportButton,children:"Export Employee List"})]}),(0,r.jsx)("div",{className:i().employeeList,children:v.map(e=>(0,r.jsxs)("div",{className:i().employeeCard,children:[(0,r.jsxs)("h3",{children:[e.name," - ",e.title]}),(0,r.jsxs)("p",{children:["Status: ",(0,r.jsx)("span",{style:{color:"online"===e.status?"green":"grey",fontWeight:"bold"},children:"online"===e.status?"Online":"Offline"})]}),(0,r.jsxs)("p",{children:["Today's Work Hours: ",k(e.workDurationToday)]}),(0,r.jsxs)("p",{children:["This Month's Work Hours: ",k(e.thisMonthWorkDuration||0)]}),(0,r.jsx)("button",{onClick:()=>a(e),className:i().button,children:"Edit"})]},e.id))}),(0,r.jsx)("div",{className:i().tableContainer,children:(0,r.jsxs)("table",{className:i().workTable,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Title"}),N.map(e=>(0,r.jsx)("th",{children:e},e)),(0,r.jsx)("th",{children:"Total"})]})}),(0,r.jsx)("tbody",{children:v.map(e=>{let a=N.reduce((a,t)=>a+(e.workPeriod&&e.workPeriod[t]||0),0);return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.title}),N.map(a=>(0,r.jsx)("td",{children:k(e.workPeriod&&e.workPeriod[a]||0)},a)),(0,r.jsx)("td",{children:k(a)})]},e.id)})})]})})]})},b=t(7346);t(433);var y=t(6140),f=t.n(y),g=function(){let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)([]),[l,o]=(0,s.useState)(""),[i,u]=(0,s.useState)(0),[p,h]=(0,s.useState)([]),[x,y]=(0,s.useState)(0),[g,j]=(0,s.useState)(0),[k,w]=(0,s.useState)({hours:0,minutes:0}),[v,N]=(0,s.useState)([]),[_,D]=(0,s.useState)(null),C=(0,s.useCallback)(async()=>{let e=(await (0,d.PL)((0,d.hJ)(c.Z,"employee"))).docs.map(e=>e.data()),t=m.ou.now(),r=t.minus({days:6}).startOf("day"),s=t.endOf("day"),l=[];for(let e=r;e<=s;e=e.plus({days:1}))l.push(e.toFormat("yyyy-MM-dd"));let o=e.filter(e=>{let a=e.workHours&&e.workHours[t.weekdayLong];return a&&" - "!==a}),i=o.filter(e=>"online"===e.status),p=e.reduce((e,a)=>e+(a.workDurationToday||0),0)/e.length,x=e.map(e=>{let a=e.workPeriod||{},t=l.map(e=>(a[e]||0)/60);return{name:e.name,workHours:t}});a(e),n(e),u(o.length),h(o),y(i.length),j(e.length),w({hours:Math.floor(p/60),minutes:Math.floor(p%60)}),N(x)},[]);(0,s.useEffect)(()=>{C()},[C]);let W={labels:Array.from({length:7},(e,a)=>m.ou.now().minus({days:6-a}).toFormat("yyyy-MM-dd")),datasets:_?[{label:_.name,data:_.workHours,fill:!0,borderColor:"#4caf50",backgroundColor:"rgba(76, 175, 80, 0.2)"}]:[]},S={labels:Array.from({length:7},(e,a)=>m.ou.now().minus({days:6-a}).toFormat("yyyy-MM-dd")),datasets:[{label:"Average Weekly Work Hours",data:v.reduce((e,a)=>(a.workHours.forEach((a,t)=>{e[t]=(e[t]||0)+a}),e),[]).map(e=>e/v.length/60),backgroundColor:"#007bff"}]},T=e=>{D(v.find(a=>a.name===e.name))};return(0,r.jsxs)("div",{className:f().dashboard,children:[(0,r.jsxs)("div",{className:f().cardsContainer,children:[(0,r.jsxs)("div",{className:"".concat(f().card," ").concat(f().cardPrimary),children:[(0,r.jsx)("h3",{children:"Today's Work Count"}),(0,r.jsxs)("p",{children:[i,"/",g]})]}),(0,r.jsxs)("div",{className:"".concat(f().card," ").concat(f().cardWarning),children:[(0,r.jsx)("h3",{children:"Employees Working Today"}),(0,r.jsx)("ul",{className:f().employeeList,children:p.map((e,a)=>(0,r.jsx)("li",{className:f().employeeItem,children:e.name},a))})]}),(0,r.jsxs)("div",{className:"".concat(f().card," ").concat(f().cardSuccess),children:[(0,r.jsx)("h3",{children:"Real-time Online Count"}),(0,r.jsx)("p",{children:x})]}),(0,r.jsxs)("div",{className:"".concat(f().card," ").concat(f().cardDanger),children:[(0,r.jsx)("h3",{children:"Average Work Hours Today"}),(0,r.jsxs)("p",{children:[k.hours," hours ",k.minutes," mins"]})]})]}),(0,r.jsxs)("div",{className:f().chartContainer,children:[(0,r.jsxs)("div",{className:f().chart,children:[(0,r.jsx)("h3",{children:"Weekly Work Hours"}),(0,r.jsx)("div",{className:f().employeeTags,children:v.map((e,a)=>(0,r.jsx)("span",{className:"".concat(f().employeeTag," ").concat((null==_?void 0:_.name)===e.name?f().selectedTag:""),onClick:()=>T(e),children:e.name},a))}),(0,r.jsx)(b.x1,{data:W,options:{plugins:{legend:{display:!1}}}})]}),(0,r.jsxs)("div",{className:f().chart,children:[(0,r.jsx)("h3",{children:"Average Weekly Work Hours"}),(0,r.jsx)(b.$Q,{data:S})]})]}),(0,r.jsxs)("div",{className:f().employeeTable,children:[(0,r.jsx)("input",{type:"text",placeholder:"Search by name or position",value:l,onChange:a=>{let t=a.target.value.toLowerCase();o(t),n(e.filter(e=>e.name.toLowerCase().includes(t)||e.title.toLowerCase().includes(t)))},className:f().searchBar}),(0,r.jsxs)("table",{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Name"}),(0,r.jsx)("th",{children:"Position"}),(0,r.jsx)("th",{children:"Status"}),(0,r.jsx)("th",{children:"Last Online"}),(0,r.jsx)("th",{children:"This Month's Work Hours"})]})}),(0,r.jsx)("tbody",{children:t.map((e,a)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.title}),(0,r.jsx)("td",{children:e.status}),(0,r.jsx)("td",{children:e.lastOnlineDate}),(0,r.jsxs)("td",{children:[(e.thisMonthWorkDuration/60).toFixed(1),"h"]})," "]},a))})]})]})]})},j=function(e){let{employee:a,onCancel:t}=e;(0,n.useRouter)();let[l,o]=(0,s.useState)([]),[u,p]=(0,s.useState)({id:"",password:"",name:"",class:"employee",title:"Administrative Officer",gender:"male",email:"",cell:"",address:"",geofence:null,workHours:{Monday:{start:"",end:""},Tuesday:{start:"",end:""},Wednesday:{start:"",end:""},Thursday:{start:"",end:""},Friday:{start:"",end:""},Saturday:{start:"",end:""},Sunday:{start:"",end:""}},lastMonthWorkDuration:{hours:0,minutes:0},lastOnlineDate:"",thisMonthWorkDuration:{hours:0,minutes:0},twoWeeksWorkDuration:{hours:0,minutes:0},workDurationToday:{hours:0,minutes:0},totalWorkDuration:{hours:0,minutes:0}}),[h,m]=(0,s.useState)(""),[x,b]=(0,s.useState)({hours:0,minutes:0}),[y,f]=(0,s.useState)("");(0,s.useEffect)(()=>{if((async()=>{let e=(0,d.IO)((0,d.hJ)(c.Z,"geofence"));o((await (0,d.PL)(e)).docs.map(e=>({id:e.id,...e.data()})))})(),a){let{lastMonthWorkDuration:e,thisMonthWorkDuration:t,twoWeeksWorkDuration:r,workDurationToday:s,totalWorkDuration:n,workHours:l,workPeriod:o,workTime:i,...d}=a;p({...d,workHours:k(l),lastMonthWorkDuration:g(e),thisMonthWorkDuration:g(t),twoWeeksWorkDuration:g(r),workDurationToday:g(s),totalWorkDuration:g(n)}),o&&h&&o[h]&&b(g(o[h])),i&&h&&i[h]?f(i[h]):f("")}},[a,h]);let g=e=>({hours:Math.floor(e/60),minutes:e%60}),j=e=>{let{hours:a,minutes:t}=e;return 60*(parseInt(a)||0)+(parseInt(t)||0)},k=e=>{let a={};return Object.keys(e).forEach(t=>{let[r,s]=e[t].split(" - ").map(e=>"-"===e?"":e);a[t]={start:r,end:s}}),a},w=e=>{let{name:a,value:t}=e.target;if(a.includes(".start")||a.includes(".end")){let[e,r]=a.split(".");p(a=>({...a,workHours:{...a.workHours,[e]:{...a.workHours[e],[r]:t}}}))}else if(a.includes(".hours")||a.includes(".minutes")){let[e,r]=a.split(".");"selectedDateWorkDuration"===e?b(e=>({...e,[r]:t})):p(a=>({...a,[e]:{...a[e],[r]:t}}))}else p(e=>({...e,[a]:t}))},v=async e=>{e.preventDefault();try{let e=(0,d.IO)((0,d.hJ)(c.Z,"employee"),(0,d.ar)("id","==",u.id)),r=await (0,d.PL)(e);if(r.empty){alert("Employee ID does not exist");return}let s=r.docs[0],n=(0,d.JU)(c.Z,"employee",s.id),l={...u,lastMonthWorkDuration:j(u.lastMonthWorkDuration),thisMonthWorkDuration:j(u.thisMonthWorkDuration),twoWeeksWorkDuration:j(u.twoWeeksWorkDuration),workDurationToday:j(u.workDurationToday),totalWorkDuration:j(u.totalWorkDuration),workHours:Object.keys(u.workHours).reduce((e,a)=>(e[a]="".concat(u.workHours[a].start," - ").concat(u.workHours[a].end)||"- -",e),{}),workPeriod:{...a.workPeriod,[h]:j(x)},workTime:{...a.workTime,[h]:y}};await (0,d.r7)(n,l),alert("Employee updated successfully!"),t()}catch(e){console.error("Error updating document: ",e),alert("Error updating employee.")}},N=async()=>{if(confirm("Are you sure you want to delete this employee?"))try{let e=(0,d.IO)((0,d.hJ)(c.Z,"employee"),(0,d.ar)("id","==",u.id)),a=await (0,d.PL)(e);if(a.empty){alert("Employee ID does not exist");return}let r=a.docs[0],s=(0,d.JU)(c.Z,"employee",r.id);await (0,d.oe)(s),alert("Employee deleted successfully!"),t()}catch(e){console.error("Error deleting document: ",e),alert("Error deleting employee.")}};return(0,r.jsxs)("div",{className:i().register,children:[(0,r.jsx)("h2",{className:i().editTitle,children:"Edit Employee"}),(0,r.jsxs)("form",{onSubmit:v,className:i().form,children:[(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"id",children:"ID"}),(0,r.jsx)("input",{type:"text",name:"id",placeholder:"ID",value:u.id,onChange:w,required:!0,className:i().input})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"password",children:"Password"}),(0,r.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:u.password,onChange:w,required:!0,className:i().input})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"name",children:"Name"}),(0,r.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:u.name,onChange:w,required:!0,className:i().input})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"class",children:"Class"}),(0,r.jsxs)("select",{name:"class",value:u.class,onChange:w,required:!0,className:i().input,children:[(0,r.jsx)("option",{value:"employee",children:"Employee"}),(0,r.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"title",children:"Title"}),(0,r.jsxs)("select",{name:"title",value:u.title,onChange:w,required:!0,className:i().input,children:[(0,r.jsx)("option",{value:"Administrative Officer",children:"Administrative Officer"}),(0,r.jsx)("option",{value:"Program Coordinator",children:"Program Coordinator"}),(0,r.jsx)("option",{value:"Instructor",children:"Instructor"}),(0,r.jsx)("option",{value:"Receptionist",children:"Receptionist"})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"gender",children:"Gender"}),(0,r.jsxs)("select",{name:"gender",value:u.gender,onChange:w,required:!0,className:i().input,children:[(0,r.jsx)("option",{value:"male",children:"Male"}),(0,r.jsx)("option",{value:"female",children:"Female"})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"email",children:"Email"}),(0,r.jsx)("input",{type:"email",name:"email",placeholder:"Email",value:u.email,onChange:w,required:!0,className:i().input})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"cell",children:"Cell"}),(0,r.jsx)("input",{type:"text",name:"cell",placeholder:"Cell",value:u.cell,onChange:w,required:!0,className:i().input})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"address",children:"Address"}),(0,r.jsx)("input",{type:"text",name:"address",placeholder:"Address",value:u.address,onChange:w,required:!0,className:i().input})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"geofence",children:"Geofence"}),(0,r.jsxs)("select",{name:"geofence",id:"geofence-select",value:u.geofence,onChange:w,required:!0,children:[(0,r.jsx)("option",{value:null,children:"None"}),l.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:i().workHours,children:[(0,r.jsx)("h3",{children:"Work Hours"}),Object.keys(u.workHours).map(e=>(0,r.jsxs)("div",{className:i().workHoursRow,children:[(0,r.jsx)("label",{children:e}),(0,r.jsx)("input",{type:"time",name:"".concat(e,".start"),value:u.workHours[e].start,onChange:w,className:i().inputWorkHours}),(0,r.jsx)("span",{children:"to"}),(0,r.jsx)("input",{type:"time",name:"".concat(e,".end"),value:u.workHours[e].end,onChange:w,className:i().inputWorkHours})]},e))]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"selectedDateWorkDuration.hours",children:"Work Duration for Selected Date"}),(0,r.jsxs)("div",{className:i().durationFields,children:[(0,r.jsx)("input",{type:"date",name:"selectedDate",placeholder:"Selected Date",value:h,onChange:e=>{m(e.target.value),a.workPeriod&&a.workPeriod[e.target.value]?b(g(a.workPeriod[e.target.value])):b({hours:0,minutes:0}),a.workTime&&a.workTime[e.target.value]?f(a.workTime[e.target.value]):f("")},className:i().input}),(0,r.jsx)("input",{type:"number",name:"selectedDateWorkDuration.hours",placeholder:"Hours",value:x.hours,onChange:w,className:i().inputTime}),(0,r.jsx)("span",{children:"hours"}),(0,r.jsx)("input",{type:"number",name:"selectedDateWorkDuration.minutes",placeholder:"Minutes",value:x.minutes,onChange:w,className:i().inputTime}),(0,r.jsx)("span",{children:"mins"})]})]}),(0,r.jsx)("div",{className:i().formGroup,children:(0,r.jsxs)("div",{className:i().durationFields,children:[(0,r.jsx)("label",{htmlFor:"selectedDateWorkTime",children:"Start Time - End Time"}),(0,r.jsx)("input",{type:"text",name:"selectedDateWorkTime",placeholder:"Start time & End time",value:y,onChange:e=>{f(e.target.value)},className:i().input})]})}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"lastOnlineDate",children:"Last Online Date"}),(0,r.jsx)("input",{type:"date",name:"lastOnlineDate",placeholder:"Last Online Date",value:u.lastOnlineDate,onChange:w,className:i().input})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"lastMonthWorkDuration.hours",children:"Last Month Work Duration"}),(0,r.jsxs)("div",{className:i().durationFields,children:[(0,r.jsx)("input",{type:"number",name:"lastMonthWorkDuration.hours",placeholder:"Hours",value:u.lastMonthWorkDuration.hours,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"hours"}),(0,r.jsx)("input",{type:"number",name:"lastMonthWorkDuration.minutes",placeholder:"Minutes",value:u.lastMonthWorkDuration.minutes,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"mins"})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"thisMonthWorkDuration.hours",children:"This Month Work Duration"}),(0,r.jsxs)("div",{className:i().durationFields,children:[(0,r.jsx)("input",{type:"number",name:"thisMonthWorkDuration.hours",placeholder:"Hours",value:u.thisMonthWorkDuration.hours,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"hours"}),(0,r.jsx)("input",{type:"number",name:"thisMonthWorkDuration.minutes",placeholder:"Minutes",value:u.thisMonthWorkDuration.minutes,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"mins"})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"twoWeeksWorkDuration.hours",children:"Two Weeks Work Duration"}),(0,r.jsxs)("div",{className:i().durationFields,children:[(0,r.jsx)("input",{type:"number",name:"twoWeeksWorkDuration.hours",placeholder:"Hours",value:u.twoWeeksWorkDuration.hours,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"hours"}),(0,r.jsx)("input",{type:"number",name:"twoWeeksWorkDuration.minutes",placeholder:"Minutes",value:u.twoWeeksWorkDuration.minutes,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"mins"})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"workDurationToday.hours",children:"Work Duration Today"}),(0,r.jsxs)("div",{className:i().durationFields,children:[(0,r.jsx)("input",{type:"number",name:"workDurationToday.hours",placeholder:"Hours",value:u.workDurationToday.hours,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"hours"}),(0,r.jsx)("input",{type:"number",name:"workDurationToday.minutes",placeholder:"Minutes",value:u.workDurationToday.minutes,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"mins"})]})]}),(0,r.jsxs)("div",{className:i().formGroup,children:[(0,r.jsx)("label",{htmlFor:"totalWorkDuration.hours",children:"Total Work Duration"}),(0,r.jsxs)("div",{className:i().durationFields,children:[(0,r.jsx)("input",{type:"number",name:"totalWorkDuration.hours",placeholder:"Hours",value:u.totalWorkDuration.hours,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"hours"}),(0,r.jsx)("input",{type:"number",name:"totalWorkDuration.minutes",placeholder:"Minutes",value:u.totalWorkDuration.minutes,onChange:w,className:i().input}),(0,r.jsx)("span",{children:"mins"})]})]}),(0,r.jsxs)("div",{className:i().buttonGroup,children:[(0,r.jsx)("button",{type:"submit",className:i().saveButton,children:"Save"}),(0,r.jsx)("button",{type:"button",onClick:t,className:i().cancelButton,children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:N,className:i().cancelButton,children:"Delete"})]})]})]})},k=()=>{let[e,a]=(0,s.useState)([]);(0,s.useEffect)(()=>{(async()=>{try{let e=(await (0,d.PL)((0,d.hJ)(c.Z,"geofence"))).docs.map(e=>({id:e.id,...e.data()}));a(e)}catch(e){console.error("Error fetching geofences: ",e)}})()},[]);let t=async t=>{try{await (0,d.oe)((0,d.JU)(c.Z,"geofence",t)),a(e.filter(e=>e.id!==t)),alert("Geofence deleted successfully")}catch(e){console.error("Error deleting geofence: ",e),alert("Error deleting geofence")}};return(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Geofences"}),e.length>0?(0,r.jsxs)("table",{className:"min-w-full bg-white border border-gray-200 rounded-lg shadow-md",children:[(0,r.jsx)("thead",{className:"bg-gray-100 border-b border-gray-200",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-gray-600",children:"Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-gray-600",children:"Address"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-gray-600"})]})}),(0,r.jsx)("tbody",{children:e.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 text-gray-800",children:e.name}),(0,r.jsx)("td",{className:"px-6 py-4 text-gray-800",children:e.address}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("button",{onClick:()=>t(e.id),className:"bg-red-500 text-white py-1 px-3 rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500",children:"Delete"})})]},e.id))})]}):(0,r.jsx)("p",{className:"text-gray-500",children:"No geofences available"})]})};t(8448);var w=e=>{let{userName:a,updateMessages:t}=e,[n,l]=(0,s.useState)([]),[o,i]=(0,s.useState)(!0),[u,p]=(0,s.useState)("");(0,s.useEffect)(()=>{(async()=>{let e=(await (0,d.PL)((0,d.hJ)(c.Z,"messages"))).docs.map(e=>({id:e.id,...e.data()}));e.sort((e,a)=>a.createdAt.toDate()-e.createdAt.toDate()),l(e),i(!1)})(),p(a)},[a]);let h=async(e,a)=>{let t=(0,d.JU)(c.Z,"messages",e);await (0,d.r7)(t,{status:a}),l(n.map(t=>t.id===e?{...t,status:a}:t))};return(0,r.jsxs)("div",{className:"container",children:[(0,r.jsx)("h2",{children:"Employee Messages"}),(0,r.jsx)("ul",{children:n.map(e=>(0,r.jsxs)("li",{children:[(0,r.jsxs)("p",{children:["Employee ID: ",e.userId]}),(0,r.jsxs)("p",{children:["Name: ",e.name]}),(0,r.jsxs)("p",{children:["Time: ",e.createdAt.toDate().toString()]}),(0,r.jsxs)("p",{children:["Message: ",e.message]}),(0,r.jsxs)("p",{children:["Status: ",e.status]}),"pending"===e.status&&(0,r.jsx)("button",{onClick:()=>{h(e.id,"Resolved by ".concat(u," at ").concat(new Date)),t()},children:"Mark as Resolved"})]},e.id))})]})};t(1556);var v=e=>{let{userId:a,userName:t}=e,[n,l]=(0,s.useState)([]),[o,i]=(0,s.useState)({title:"",message:""}),[u,p]=(0,s.useState)(a),[h,m]=(0,s.useState)(t);(0,s.useEffect)(()=>{(async()=>{try{let e=(await (0,d.PL)((0,d.hJ)(c.Z,"bulletins"))).docs.map(e=>({id:e.id,...e.data()})).sort((e,a)=>{let t=e.createdAt.toDate?e.createdAt.toDate():new Date(e.createdAt);return(a.createdAt.toDate?a.createdAt.toDate():new Date(a.createdAt))-t});l(e)}catch(e){console.error("Error fetching bulletins:",e)}})()},[]);let x=async()=>{try{if(o.title&&o.message){await (0,d.ET)((0,d.hJ)(c.Z,"bulletins"),{title:o.title,author:h,authorId:u,message:o.message,createdAt:new Date}),i({title:"",message:""});let e=(await (0,d.PL)((0,d.hJ)(c.Z,"bulletins"))).docs.map(e=>({id:e.id,...e.data()}));l(e)}}catch(e){console.error("Error adding bulletin:",e)}},b=async e=>{try{await (0,d.oe)((0,d.JU)(c.Z,"bulletins",e));let a=(await (0,d.PL)((0,d.hJ)(c.Z,"bulletins"))).docs.map(e=>({id:e.id,...e.data()}));l(a)}catch(e){console.error("Error deleting bulletin:",e)}};return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"admin-bulletin-board",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Add New Bulletin"}),(0,r.jsx)("input",{type:"text",value:o.title,onChange:e=>i({...o,title:e.target.value}),placeholder:"Title"}),(0,r.jsx)("textarea",{value:o.message,onChange:e=>i({...o,message:e.target.value}),placeholder:"Message"}),(0,r.jsx)("button",{onClick:()=>x(o),disabled:!o.title||!o.message,children:"Add Bulletin"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{children:"Bulletin List"}),(0,r.jsx)("ul",{className:"bulletin-list",children:n.map(e=>(0,r.jsxs)("li",{className:"bulletin-item",children:[(0,r.jsxs)("div",{className:"bulletin-header",children:[(0,r.jsx)("h3",{className:"bulletin-title",children:e.title}),(0,r.jsxs)("p",{className:"bulletin-author",children:["By: ",e.author]})]}),(0,r.jsx)("p",{className:"bulletin-message",children:e.message}),(0,r.jsx)("p",{className:"bulletin-timestamp",children:new Date(e.createdAt.toDate()).toLocaleString()}),a===e.authorId&&(0,r.jsx)("button",{className:"bulletin-delete-button",onClick:()=>b(e.id),children:"Delete"})]},e.id))})]})]})};let N=(0,t(7818).default)(()=>Promise.all([t.e(529),t.e(415),t.e(522),t.e(747),t.e(681)]).then(t.bind(t,7681)),{ssr:!1});var _=(0,l.Z)(function(){let[e,a]=(0,s.useState)("Dashboard"),[t,l]=(0,s.useState)(""),[o,p]=(0,s.useState)(""),[h,m]=(0,s.useState)(null),[b,y]=(0,s.useState)(!1),f=(0,n.useRouter)();(0,s.useEffect)(()=>{let e=localStorage.getItem("userId");e&&p(e);let a=localStorage.getItem("adminName");a&&l(a),_()},[]);let _=async()=>{let e=(0,d.IO)((0,d.hJ)(c.Z,"messages"),(0,d.ar)("status","==","pending"));y(!(await (0,d.PL)(e)).empty)};return(0,r.jsxs)("div",{className:i().container,children:[(0,r.jsx)("title",{children:"MTG - Admin"}),(0,r.jsxs)("div",{className:i().sidebar,children:[(0,r.jsxs)("div",{className:i().welcome,children:[(0,r.jsx)("h3",{className:"text-2xl",children:"Welcome,"}),(0,r.jsx)("h2",{children:t})]}),(0,r.jsxs)("div",{className:i().menu,children:[(0,r.jsx)("div",{className:i().sidebarItem,onClick:()=>a("Dashboard"),children:"Dashboard"}),(0,r.jsx)("div",{className:i().sidebarItem,onClick:()=>a("Employee List"),children:"Employee List"}),(0,r.jsx)("div",{className:i().sidebarItem,onClick:()=>a("Register"),children:"Register"}),(0,r.jsx)("div",{className:i().sidebarItem,onClick:()=>a("Bulletin"),children:"Bulletin"}),(0,r.jsx)("div",{className:"".concat(i().sidebarItem," ").concat(b?i().blinking:""),onClick:()=>{a("Messages"),y(!1)},children:"Employee Messages"}),(0,r.jsx)("div",{className:i().sidebarItem,onClick:()=>a("GeofenceDisplay"),children:"Geofences"}),(0,r.jsx)("div",{className:i().sidebarItem,onClick:()=>a("GeofenceSetup"),children:"Geofence Setup"})]}),(0,r.jsx)("div",{className:i().logout,children:(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem("adminName"),f.push("/")},children:"Logout"})})]}),(0,r.jsx)("div",{className:i().main,children:(()=>{switch(e){case"Dashboard":default:return(0,r.jsx)(g,{});case"Employee List":return(0,r.jsx)(x,{onEdit:e=>{m(e),a("Edit")}});case"Register":return(0,r.jsx)(u,{});case"Edit":return(0,r.jsx)(j,{employee:h,onCancel:()=>a("Employee List")});case"Bulletin":return(0,r.jsx)(v,{userId:o,userName:t});case"Messages":return(0,r.jsx)(w,{userName:t,updateMessages:_});case"GeofenceDisplay":return(0,r.jsx)(k,{});case"GeofenceSetup":return(0,r.jsx)(N,{})}})()})]})})},5344:function(e,a,t){"use strict";var r=t(5236),s=t(9842),n=t(9854);let l=(0,r.ZF)({apiKey:"AIzaSyB5__zMeXEsk4RxME0Fg46Sz7AhqZzA9qE",authDomain:"mtg-quickyclock.firebaseapp.com",projectId:"mtg-quickyclock",storageBucket:"mtg-quickyclock.appspot.com",messagingSenderId:"865821745601",appId:"1:865821745601:web:b01221defd23ac3d338f40"}),o=(0,s.ad)(l);(0,n.cF)(l),a.Z=o},8370:function(e,a,t){"use strict";var r=t(7437),s=t(6463),n=t(2265);a.Z=e=>{let a=a=>{let t=(0,s.useRouter)();return(0,n.useEffect)(()=>{{let e=localStorage.getItem("userName"),a=localStorage.getItem("adminName");e||a||t.push("/")}},[t]),(0,r.jsx)(e,{...a})};return a.displayName="withAuth(".concat(e.displayName||e.name||"Component",")"),a}},1556:function(){},8448:function(){},3537:function(e){e.exports={container:"admin_container__T9cg4",sidebar:"admin_sidebar__5knmB",welcome:"admin_welcome__EOlff",menu:"admin_menu__Y1Ly4",sidebarItem:"admin_sidebarItem__qvaqy",blinking:"admin_blinking___Tdke",blink:"admin_blink__pEves",logout:"admin_logout__AnB4w",main:"admin_main__zshRw",dashboard:"admin_dashboard__a0Ls_",card:"admin_card__Kn9tF",content:"admin_content__Nu_se",register:"admin_register__xR5KE",input:"admin_input__O8BkZ",formGroup:"admin_formGroup__rBUwz",workHours:"admin_workHours__UhxOF",workHoursRow:"admin_workHoursRow__s7mQ3",inputTime:"admin_inputTime__Soann",buttonGroup:"admin_buttonGroup__P8OAf",saveButton:"admin_saveButton__aSLLv",cancelButton:"admin_cancelButton__rtWWq",button:"admin_button__MLcPe",durationFields:"admin_durationFields__DWQXe",searchBar:"admin_searchBar__iAS0a",exportButton:"admin_exportButton__RN1ka",employeeList:"admin_employeeList__O9YWH",employeeCard:"admin_employeeCard___xEpz",header:"admin_header__zGWj8",editTitle:"admin_editTitle__smNi5",span:"admin_span__8M3CT",inputWorkHours:"admin_inputWorkHours__NwpD9",tableContainer:"admin_tableContainer__XkWgJ",workTable:"admin_workTable__ph5H8","map-container":"admin_map-container__Naoh6"}},6140:function(e){e.exports={dashboard:"dashboard_dashboard__SPoqz",cardsContainer:"dashboard_cardsContainer__sdCNc",card:"dashboard_card__sDD_F",cardPrimary:"dashboard_cardPrimary__GVxoU",cardWarning:"dashboard_cardWarning__z0YPz",cardSuccess:"dashboard_cardSuccess__N1kwN",cardDanger:"dashboard_cardDanger__4OduP",employeeTags:"dashboard_employeeTags__n0g57",employeeTag:"dashboard_employeeTag__KVXFJ",selectedTag:"dashboard_selectedTag__MXuh8",chartContainer:"dashboard_chartContainer__VN0Is",chart:"dashboard_chart__Y6hZ_",employeeTable:"dashboard_employeeTable__g54gA",searchBar:"dashboard_searchBar__QHS3W",employeeList:"dashboard_employeeList___vHh5",employeeItem:"dashboard_employeeItem__kSAAq",online:"dashboard_online__wlw8p",offline:"dashboard_offline__mdDU5"}}},function(e){e.O(0,[773,358,425,674,900,439,971,23,744],function(){return e(e.s=8588)}),_N_E=e.O()}]);